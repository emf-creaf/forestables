<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Making Forest Inventory Data Tidy • forestables</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Making Forest Inventory Data Tidy">
<meta name="description" content="The `forestables` package converts raw forest inventory files from the Spanish Forest Inventory (IFN), the French Forest Inventory (FFI) and the USA Forest Inventory (FIA) into tidy tables to be used in analyses and modelling.">
<meta property="og:description" content="The `forestables` package converts raw forest inventory files from the Spanish Forest Inventory (IFN), the French Forest Inventory (FFI) and the USA Forest Inventory (FIA) into tidy tables to be used in analyses and modelling.">
<meta property="og:image" content="https://emf-creaf.github.io/forestables/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">forestables</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/documentacion.html">Inventory data ingestion process</a></li>
    <li><a class="dropdown-item" href="articles/inventory_data_tibble.html">Inventory data output</a></li>
    <li><a class="dropdown-item" href="articles/selecting_plots.html">Selecting plots</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="forestables">forestables<a class="anchor" aria-label="anchor" href="#forestables"></a>
</h1>
</div>
<p><a href="https://emf-creaf.github.io/forestables/"><img src="reference/figures/logo.png" align="right" height="139" alt="forestables website"></a></p>
<p><a href="https://github.com/emf-creaf/forestables/actions/workflows/R-CMD-check_main.yaml" class="external-link"><img src="https://github.com/emf-creaf/forestables/actions/workflows/R-CMD-check_main.yaml/badge.svg" alt="R-CMD-check"></a></p>
<p>Read and uniformize forest inventories data from the FIA (USA forest inventory), FFI (France forest inventory) and IFN (Spain forest inventory).</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of forestables from <a href="https://github.com/emf-creaf/forestables" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"emf-creaf/forestables"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="inventories-files">Inventories files<a class="anchor" aria-label="anchor" href="#inventories-files"></a>
</h2>
<p><code>forestables</code> offers download functions to get the inventory files from the official websites from each inventory:</p>
<ul>
<li>
<a href="https://www.fs.usda.gov/research/products/dataandtools/tools/fia-datamart" class="external-link">FIA</a><br>
</li>
<li>
<a href="https://inventaire-forestier.ign.fr/dataifn/?lang=en" class="external-link">FFI</a><br>
</li>
<li>IFN:
<ul>
<li><a href="https://www.miteco.gob.es/es/biodiversidad/servicios/banco-datos-naturaleza/informacion-disponible/ifn2_descargas.html" class="external-link">IFN2</a></li>
<li>
<a href="https://www.miteco.gob.es/es/biodiversidad/servicios/banco-datos-naturaleza/informacion-disponible/ifn3_bbdd_descargas_htm.html" class="external-link">IFN3</a> (<em>accdb</em> are be used)</li>
<li><a href="https://www.miteco.gob.es/es/biodiversidad/temas/inventarios-nacionales/inventario-forestal-nacional/cuarto_inventario.html" class="external-link">IFN4</a></li>
</ul>
</li>
</ul>
<p>This sometimes fails due to the pages being unavailable for one reason or another. We recommend to manually download and unzip the data in the desired folder.<br>
Download functions are offered as helpers for programmatically approaches, but users should be careful as data can be missing due to connection errors, pages updates…</p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Download FFI (France forest inventory) and extract all plots in the Loire department from 2015:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://emf-creaf.github.io/forestables/">forestables</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Cargando paquete requerido: data.table</span></span>
<span><span class="co">#&gt; Cargando paquete requerido: dtplyr</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Adjuntando el paquete: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:data.table':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     between, first, last</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span></span>
<span><span class="co">## Downloading all FFI data (if not already)</span></span>
<span><span class="va">ffi_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/download_inventory.html">download_inventory</a></span><span class="op">(</span><span class="st">"FFI"</span>, destination <span class="op">=</span> <span class="va">ffi_path</span><span class="op">)</span></span>
<span><span class="co">#&gt; ℹ Downloading FFI available data</span></span>
<span><span class="co">#&gt; ℹ Unzipping downloaded data in '/tmp/Rtmp6r5gue'</span></span>
<span><span class="co">#&gt; ✔ Done!</span></span>
<span></span>
<span><span class="co">## Get the plots</span></span>
<span><span class="va">ffi_filter_list</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="reference/show_plots_from.html">show_plots_from</a></span><span class="op">(</span><span class="st">"FFI"</span>, folder <span class="op">=</span> <span class="va">ffi_path</span>, departments <span class="op">=</span> <span class="st">"42"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">CAMPAGNE</span> <span class="op">==</span> <span class="fl">2015</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/create_filter_list.html">create_filter_list</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">loire_plots_2015</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ffi_to_tibble.html">ffi_to_tibble</a></span><span class="op">(</span></span>
<span>  <span class="st">"42"</span>,</span>
<span>  years <span class="op">=</span> <span class="fl">2015</span>,</span>
<span>  filter_list <span class="op">=</span> <span class="va">ffi_filter_list</span>,</span>
<span>  folder <span class="op">=</span> <span class="va">ffi_path</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/clean_empty.html">clean_empty</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tree"</span>, <span class="st">"shrub"</span>, <span class="st">"regen"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/inventory_as_sf.html">inventory_as_sf</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Start</span></span>
<span><span class="co">#&gt; ℹ Processing 1 year</span></span>
<span><span class="co">#&gt; Getting ready to retrieve 113 plots for 2015</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Adjuntando el paquete: 'purrr'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The following object is masked from 'package:data.table':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     transpose</span></span>
<span></span>
<span><span class="co">## Explore the plots</span></span>
<span><span class="va">loire_plots_2015</span></span>
<span><span class="co">#&gt; Simple feature collection with 50 features and 15 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 3.70236 ymin: 45.27425 xmax: 4.739146 ymax: 46.20189</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; # A tibble: 50 × 16</span></span>
<span><span class="co">#&gt;      crs id_unique_code  year plot    coord_sys_orig aspect slope country dep  </span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;           &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;</span></span>
<span><span class="co">#&gt;  1  4326 FR_42_1000969   2015 1000969 LAMBERT         342      12 FR      42   </span></span>
<span><span class="co">#&gt;  2  4326 FR_42_1002527   2015 1002527 LAMBERT         189      36 FR      42   </span></span>
<span><span class="co">#&gt;  3  4326 FR_42_1002664   2015 1002664 LAMBERT          54      26 FR      42   </span></span>
<span><span class="co">#&gt;  4  4326 FR_42_1003986   2015 1003986 LAMBERT          47.7    44 FR      42   </span></span>
<span><span class="co">#&gt;  5  4326 FR_42_1005427   2015 1005427 LAMBERT         153       7 FR      42   </span></span>
<span><span class="co">#&gt;  6  4326 FR_42_1005981   2015 1005981 LAMBERT         130.     25 FR      42   </span></span>
<span><span class="co">#&gt;  7  4326 FR_42_1006115   2015 1006115 LAMBERT         270      40 FR      42   </span></span>
<span><span class="co">#&gt;  8  4326 FR_42_1006386   2015 1006386 LAMBERT         324      22 FR      42   </span></span>
<span><span class="co">#&gt;  9  4326 FR_42_1006791   2015 1006791 LAMBERT         266.     45 FR      42   </span></span>
<span><span class="co">#&gt; 10  4326 FR_42_1006998   2015 1006998 LAMBERT          NA       0 FR      42   </span></span>
<span><span class="co">#&gt; # ℹ 40 more rows</span></span>
<span><span class="co">#&gt; # ℹ 7 more variables: dep_name &lt;chr&gt;, visite &lt;int&gt;, tree &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   understory &lt;list&gt;, regen &lt;list&gt;, geometry &lt;POINT [°]&gt;, crs_orig &lt;dbl&gt;</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing forestables</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Adriana Tovar <br><small class="roles"> Author, contributor </small>  </li>
<li>Víctor Granda <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-0469-1991" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adriana Tovar, Víctor Granda.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
