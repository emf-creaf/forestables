<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Raw FIA data to tibble — fia_to_tibble • forestables</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Raw FIA data to tibble — fia_to_tibble"><meta name="description" content="Transform raw FIA plot data into tidy data for easier use"><meta property="og:description" content="Transform raw FIA plot data into tidy data for easier use"><meta property="og:image" content="https://emf-creaf.github.io/forestables/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">forestables</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/documentacion.html">Inventory data ingestion process</a></li>
    <li><a class="dropdown-item" href="../articles/inventory_data_tibble.html">Inventory data output</a></li>
    <li><a class="dropdown-item" href="../articles/selecting_plots.html">Selecting plots</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Raw FIA data to tibble</h1>

      <div class="d-none name"><code>fia_to_tibble.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Transform raw FIA plot data into tidy data for easier use</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fia_to_tibble</span><span class="op">(</span></span>
<span>  <span class="va">states</span>,</span>
<span>  <span class="va">years</span>,</span>
<span>  filter_list <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">folder</span>,</span>
<span>  clean_empty <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  as_sf <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .parallel_options <span class="op">=</span> <span class="fu">furrr</span><span class="fu">::</span><span class="fu"><a href="https://furrr.futureverse.org/reference/furrr_options.html" class="external-link">furrr_options</a></span><span class="op">(</span>scheduling <span class="op">=</span> <span class="fl">1L</span>, stdout <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  .verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-states">states<a class="anchor" aria-label="anchor" href="#arg-states"></a></dt>
<dd><p>A character vector with the two letters code for the states to extract the data
from.</p></dd>


<dt id="arg-years">years<a class="anchor" aria-label="anchor" href="#arg-years"></a></dt>
<dd><p>A numeric vector with the years to extract de data from.</p></dd>


<dt id="arg-filter-list">filter_list<a class="anchor" aria-label="anchor" href="#arg-filter-list"></a></dt>
<dd><p>A nested list of states, counties and plots to extract the data from.
If left <code>NULL</code> all plots for the state for all years will be extracted, which can use a
big amount of memory. See details.</p></dd>


<dt id="arg-folder">folder<a class="anchor" aria-label="anchor" href="#arg-folder"></a></dt>
<dd><p>The path to the folder containing the FIA csv files, as character.</p></dd>


<dt id="arg-clean-empty">clean_empty<a class="anchor" aria-label="anchor" href="#arg-clean-empty"></a></dt>
<dd><p>Vector with column names from where to remove empty results. Can be one or
more of <code>"tree"</code>, <code>"shrub"</code>, <code>"herbs"</code> and <code>"regen"</code>. If more than one,
only plots with data in all columns selected will be retained. Default to NULL, no cleaning is
done.</p></dd>


<dt id="arg-as-sf">as_sf<a class="anchor" aria-label="anchor" href="#arg-as-sf"></a></dt>
<dd><p>Logical indicating if the data must be returned as an spatial object. This always
can be done later, as the data contains coordinates and crs info. Default to <code>FALSE</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Not used at the moment</p></dd>


<dt id="arg--parallel-options">.parallel_options<a class="anchor" aria-label="anchor" href="#arg--parallel-options"></a></dt>
<dd><p>An object of class <code>furrr_options</code>. See
<code><a href="https://furrr.futureverse.org/reference/furrr_options.html" class="external-link">furrr_options</a></code>.</p></dd>


<dt id="arg--verbose">.verbose<a class="anchor" aria-label="anchor" href="#arg--verbose"></a></dt>
<dd><p>Logical controlling if progress messages are shown.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A nested tibble. This tibble contains a row per plot/year combination, with the plot
metadata included, as well as columns containing tibbles with tree, shrub, herbs and soil
information. See <code><a href="../articles/inventory_data_tibble.html">vignette("inventory_data_tibble", package = "forestables")</a></code></p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function will take every year specified and will retrieve and transform the plot data
for the states and plots provided. For that, csv files from FIA must reside in the folder
indicated in the <code>folder</code> argument.</p>
    </div>
    <div class="section level2">
    <h2 id="filter-list">Filter list<a class="anchor" aria-label="anchor" href="#filter-list"></a></h2>


<p>If no <code>filter_list</code> argument is provided, <code>fia_to_tibble</code> will attempt to process all
plots for the states and years provided. This will result in sometimes hundred of thousands
plots to be extracted, processed and returned, which in turn will cause a big use of
memory (specially when running in parallel processes) and long times of calculation.
Is better to provide a list of states with the counties and plots to look for to narrow
the process. This <code>filter_list</code> should have the following structure:</p><div class="sourceCode"><pre><code><span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"MN"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"137"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">29396</span>, <span class="fl">25064</span><span class="op">)</span>, <span class="st">"71"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20210</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="st">"OR"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"59"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">76413</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="st">"CA"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"105"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">70128</span>, <span class="fl">83043</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  </span></code></pre></div><p><code>forestables</code> package offers workflows to create this automatically, see
<code><a href="../articles/selecting_plots.html">vignette("selecting_plots", package = "forestables")</a></code> for more details.</p>
    </div>
    <div class="section level2">
    <h2 id="parallel">Parallel<a class="anchor" aria-label="anchor" href="#parallel"></a></h2>


<p>Processing the plots from within a year can be done in parallel (<code>forestables</code> uses internally
the <code><a href="https://furrr.futureverse.org/reference/furrr-package.html" class="external-link">furrr</a></code> package for this). This means that, if parallelization is
active, several processes are launched to retrieve the plots data for that year. This is
repeated for all years provided.</p>
<p><code>.parallel_options</code> controls the finer details of how parallelization is performed (see
<code><a href="https://furrr.futureverse.org/reference/furrr_options.html" class="external-link">furrr_options</a></code>). But no parallelization can occur without setting first
a <code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></code>. By default, the chosen plan is <code><a href="https://future.futureverse.org/reference/sequential.html" class="external-link">sequential</a></code>,
so no parellization is done. Changing the plan, i.e. to <code><a href="https://future.futureverse.org/reference/multisession.html" class="external-link">multisession</a></code>
will allow <code>fia_to_tibble</code> to use parallelization when retrieving the data.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://emf-creaf.github.io/forestables/">forestables</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">fia_to_tibble</span><span class="op">(</span></span></span>
<span class="r-in"><span>  years <span class="op">=</span> <span class="fl">2014</span>, states <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"OR"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  filter_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"OR"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"59"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">76413</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  folder <span class="op">=</span> <span class="st">"path/to/fia/data"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adriana Tovar, Víctor Granda.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

